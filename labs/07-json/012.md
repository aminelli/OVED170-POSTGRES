```sql
-- ===============================================
-- PERFORMANCE E BEST PRACTICES
-- ===============================================

-- Utilizzare JSONB invece di JSON per:
-- - Operazioni di ricerca frequenti
-- - Indicizzazione
-- - Operazioni di contenimento

-- Evitare di memorizzare dati che cambiano frequentemente in JSON
-- Utilizzare indici appropriati per le query frequenti
-- Normalizzare quando la struttura Ã¨ fissa e ben definita

-- Esempio di query ottimizzata con indice
EXPLAIN (ANALYZE, BUFFERS) 
SELECT * FROM users 
WHERE preferences @> '{"theme": "dark"}';
```