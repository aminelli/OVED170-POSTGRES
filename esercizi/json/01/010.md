```sql
-- ===============================================
-- VALIDATION E CONSTRAINT
-- ===============================================

-- Aggiungere constraint per validare JSON
ALTER TABLE users 
ADD CONSTRAINT valid_age 
CHECK ((profile->>'age')::int BETWEEN 0 AND 120);

-- Constraint per campi obbligatori
ALTER TABLE users 
ADD CONSTRAINT required_fields 
CHECK (profile ? 'age' AND profile ? 'city');

```