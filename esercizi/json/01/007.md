```sql

-- ===============================================
-- AGGIORNAMENTI JSON
-- ===============================================

-- Aggiornare un campo specifico
UPDATE users 
SET preferences = jsonb_set(
    preferences, 
    '{theme}', 
    '"auto"'
) 
WHERE name = 'Mario Rossi';

-- Aggiungere un nuovo campo
UPDATE users 
SET profile = jsonb_set(
    profile, 
    '{last_login}', 
    to_jsonb(NOW())
)
WHERE email = 'mario@email.com';

-- Rimuovere un campo
UPDATE users 
SET preferences = preferences - 'language'
WHERE name = 'Anna Verdi';

-- Aggiornare array JSON
UPDATE users 
SET profile = jsonb_set(
    profile,
    '{skills}',
    (profile->'skills') || '["JavaScript"]'::jsonb
)
WHERE profile ? 'skills';
```